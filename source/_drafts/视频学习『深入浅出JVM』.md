---
title: 视频学习『深入浅出JVM』
tags:
---

### 为什么要学习JVM

1. 面试需要
2. 内存管理

### JVM运行时数据区

一个程序有数据和指令构成

1. 程序计数器

   指向当前线程正在执行的字节码指令的地址(行号)

2. 虚拟机栈

   用于存储当前线程运行方法时所需要的数据、指令、返回地址；一个栈帧表示一次方法调用，一个栈帧包括：局部变量表(局部变量表示用来存储局部变量)，操作数栈，动态链接(多态)，出口(正常退出、异常退出)等等。

3. 本地方法栈

4. 方法区

   存储类的元信息、常量(1.7+有变化)、静态变量、JIT(1.7以前)

5. 堆(Heap)

   

6. 

   

   

GC过程

JDK<1.8时

1. 担保机制，采用复制回收算法。老年代为S0 from担保。
2. 为什么是8:1:1，而不是9:1？

JDK>=1.8时

1. 引入元空间，JDK1.8以前永久代可能出现内存不够的情况，元空间不设限制?

问题思考：

1. 是堆指向栈，还是栈指向堆？

   栈指向堆

2. 字符串常量

   问：String s = new String()；在不同的JDK版本中，堆里面有多少个对象。

   JDK 1.7以前s存储在方法区中，JDK1.7以后s存储在堆上。

   JDK1.8版本中，**String常量池**已经从**方法区**中的**运行时常量池**分离到堆中了，那么在堆中的**String常量池**里存的是String对象还是引用呢？

